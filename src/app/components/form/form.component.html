<div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 text-center">
  <div class="row">
    <label for="jsonText">Insert Json Text</label>
  </div>

  <div class="row">
    <textarea id="jsonText" #jsonText></textarea>
  </div>

  <div class="row">
    <button class="btn btn-success" (click)="getData(jsonText.value)">Generate Form</button>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit(this.form.value)">

    <table datatable class="row-border hover"  >
      <!--<thead>-->
        <!--<tr *ngFor="let input of this.form.get('subForms').value">-->
          <!--<th *ngFor="let colName of Object.keys(input)"> {{colName}}</th>-->
          <!--<th *ngIf="active">Generate</th>-->
        <!--</tr>-->
      <!--</thead>-->
      <tbody formArrayName="subForms">
        <tr *ngFor="let input of subForms.value, let i = index">
          <td *ngFor="let colName of Object.keys(input); let j = index;">
            <div class="form-group" [formGroupName]="i">
              <input  [formControlName]="colName" class="form-control" [value]="input[colName]">
              <div *ngIf="getFormControl(i)[colName].touched && getFormControl(i)[colName].invalid" class="alert alert-danger">{{colName}} is required</div>
            </div>
          </td>
          <td>
            <div *ngIf="active">
              <button class="btn btn-primary" type="submit">Generate code</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </form>

  <div *ngIf="payLoad">
    <strong>Genrated code</strong>
    <pre><code>{{payLoad}}</code></pre>
  </div>
</div>






